# Prompts Específicos para Desenvolvimento

Este documento define prompts específicos e padronizados para interações com a IA em cada etapa do desenvolvimento, garantindo consistência e eficiência.

---

## 1. Criar Entidade

### Prompt:

"Leia o arquivo `project-reference-guide.md` e crie uma nova entidade DDD seguindo os padrões do projeto. Utilize os exemplos fornecidos como referência, seguindo estrutura, métodos e validações. Pergunte caso haja dúvidas sobre as regras de negócio. Importante: sempre refatore completamente o arquivo ao atualizá-lo."

### Arquivos de Referência:

- `src/domain/<domínio>/enterprise/entities/*.entity.ts`
- `prisma/schema.prisma`

---

Antes de começar, sempre confirme:

- Exemplos e contexto já fornecidos.
- Dúvidas sobre regras específicas de negócio.
- Escopo detalhado e métodos necessários.

## 2. Criar Interface e Repositórios (Prisma e In-Memory)

### Prompt:

"Leia o arquivo `project-reference-guide.md` e crie a interface do repositório, a implementação Prisma e a implementação In-Memory, seguindo o padrão existente no projeto. Confirme antes se há métodos específicos que precisam ser incluídos ou excluídos. Importante: sempre refatore completamente os arquivos ao atualizá-los."

### Arquivos de Referência:

- `src/domain/<domínio>/application/repositories/i-*.repository.ts`
- `src/infra/database/prisma/repositories/prisma-*.repository.ts`
- `src/test/repositories/in-memory-*.repository.ts`

Antes de começar, sempre confirme:

- Exemplos e contexto já fornecidos.
- Dúvidas sobre regras específicas de negócio.
- Escopo detalhado e métodos necessários.

---

## 3. Criar Use-Case (DTOs, Schema e Teste Unitário)

### Prompt:

"Leia o arquivo `project-reference-guide.md` e crie um novo Use-Case, incluindo DTOs necessários, schema de validação Zod, e testes unitários abrangendo casos de erro, edge cases e inputs inválidos. Antes de iniciar, valide se todos os métodos necessários existem nos repositórios, e caso necessário, sugira métodos adicionais.

**Após a criação:**

1. **Registrar no Module:** Adicione o Use-Case no module correspondente seguindo o padrão do projeto
2. **Executar teste:** Execute o teste com o comando `docker exec -it ead-backend-dev sh -c "pnpm test src/path/to/use-case.spec.ts"`

Importante: sempre refatore completamente os arquivos ao atualizá-los."

### Arquivos de Referência:

- `src/domain/<domínio>/application/use-cases/*.use-case.ts`
- `src/domain/<domínio>/application/dtos/*.dto.ts`
- `src/domain/<domínio>/application/use-cases/validations/*.schema.ts`
- `src/domain/<domínio>/application/use-cases/*.use-case.spec.ts`
- `src/domain/<domínio>/application/repositories/i-*.repository.ts`
- `src/infra/database/prisma/repositories/prisma-*.repository.ts`
- `src/test/repositories/in-memory-*.repository.ts`

Antes de começar, sempre confirme:

- Exemplos e contexto já fornecidos.
- Dúvidas sobre regras específicas de negócio.
- Escopo detalhado e métodos necessários.

---

## 4. Criar Controller e Teste Unitário da Rota

### Prompt:

"Leia o arquivo `project-reference-guide.md` e crie ou atualize o Controller e a rota associada ao Use-Case especificado. Inclua as validações usando class-validator e crie os testes unitários para a rota.

**Verificações obrigatórias:**
a) **Module:** Verifique se existe o module do controller. Se não existir, crie seguindo o padrão:

```typescript
@Module({
  controllers: [ControllerName],
  providers: [
    UseCaseName,
    {
      provide: 'RepositoryInterface',
      useClass: PrismaRepositoryImplementation,
    },
  ],
})
export class ModuleName {}
```

b) **Executar teste:** Após criação, execute `docker exec -it ead-backend-dev sh -c "pnpm test src/infra/controllers/tests/controller-name/verb-controller.spec.ts"`

c) **Request file:** Verifique se existe arquivo em `requests/controller-name.http` e adicione a rota de forma simples, seguindo o padrão existente

d) **Dev setup:** Adicione a rota em `requests/dev-setup/` se necessário, refatorando o script para incluir a nova funcionalidade. Se modificar o dev-setup, execute o seed: `docker exec ead-backend-dev pnpm seed:dev`

e) **Testar sistema:** Após todas as alterações, reinicie o sistema Docker para verificar se tudo está funcionando:

**Estrutura de testes:** Se ainda não existir, crie o diretório `shared/` dentro de `src/infra/controllers/tests/<controller-name>/` contendo:

- `*-controller-test-setup.ts` (configuração de mocks e instâncias)
- `*-controller-test-helpers.ts` (métodos auxiliares para testes)
- `*-controller-test-data.ts` (dados de teste organizados)

Crie um arquivo específico para cada verbo HTTP (ex: `get-*.controller.spec.ts`, `post-*.controller.spec.ts`, `put-*.controller.spec.ts`, `delete-*.controller.spec.ts`) seguindo o padrão estabelecido no projeto.

Importante: sempre refatore completamente os arquivos ao atualizá-los."

### Arquivos de Referência:

- `src/infra/controllers/*.controller.ts`
- `src/infra/controllers/tests/<controller-name>/shared/*.ts`
- `src/infra/controllers/tests/<controller-name>/<verb>-*.controller.spec.ts`

Antes de começar, sempre confirme:

- Exemplos e contexto já fornecidos.
- Dúvidas sobre regras específicas de negócio.
- Escopo detalhado e métodos necessários.

---

## 5. Criar Teste E2E

### Prompt:

"Leia o arquivo `project-reference-guide.md` e crie um teste E2E completo usando Vitest e Supertest para a nova rota criada. Garanta que cubra o fluxo feliz, cenários de erro e validações detalhadas.

**Estrutura de testes E2E:** Se ainda não existir, crie o diretório `<controller-name>/` dentro de `test/e2e/` contendo:

- `shared/` com arquivos auxiliares para setup, helpers e dados de teste
- Um arquivo específico para cada verbo HTTP (ex: `get-*.e2e.spec.ts`, `post-*.e2e.spec.ts`, `put-*.e2e.spec.ts`, `delete-*.e2e.spec.ts`)

**Tarefa final:** Executar o teste com o comando `docker exec -it ead-backend-dev sh -c "pnpm test:e2e test/e2e/controller-name/verb-endpoint.e2e.spec.ts"`

Antes de iniciar, confirme os cenários obrigatórios a serem testados. Importante: sempre refatore completamente o arquivo ao atualizá-lo."

### Arquivos de Referência:

- `test/e2e/<controller-name>/<verb>-*.e2e.spec.ts`
- `test/e2e/<controller-name>/shared/*.ts`promp
- `test/e2e/shared/*.ts` (utilitários globais)

---

## Checklist para todos os Prompts:

Antes de começar, sempre confirme:

- Exemplos e contexto já fornecidos.
- Dúvidas sobre regras específicas de negócio.
- Escopo detalhado e métodos necessários.
